:root{
  --bg:#f7f7f8; --panel:#ffffff; --ink:#111827; --muted:#6b7280;
  --line:#e5e7eb; --brand:#2563eb; --accent:#10b981; --warn:#ef4444;
  --mono: ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;
  --sans: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
}
*{box-sizing:border-box}
body{margin:0; font-family:var(--sans); color:var(--ink); background:var(--bg)}
.ok{color:#059669}.warn{color:#ef4444}

.topbar{position:sticky;top:0;z-index:10;backdrop-filter:blur(6px);
  background:rgba(255,255,255,.9);border-bottom:1px solid var(--line);
  display:flex;align-items:center;justify-content:space-between;padding:.6rem 1rem}
.brand{display:flex;gap:.6rem;align-items:center}
.brand .hint{color:var(--muted);font-size:.85rem}
.controls{display:flex;gap:.4rem;align-items:center}
.timer{display:flex;gap:.4rem;align-items:center;border:1px solid var(--line);background:#fff;padding:.2rem .4rem;border-radius:.6rem}
#clock{font-weight:700;font-variant-numeric:tabular-nums}

.btn{background:var(--brand);color:#fff;border:none;border-radius:.6rem;padding:.5rem .75rem;font-weight:600;cursor:pointer}
.btn:hover{filter:brightness(1.06)}
.btn.ghost{background:#fff;color:var(--ink);border:1px solid var(--line)}
.btn.icon{padding:.3rem .5rem}
.input{padding:.4rem .5rem;border:1px solid var(--line);border-radius:.4rem;background:#fff}

.container{max-width:1100px;margin:0 auto;padding:1rem;display:grid;gap:1rem}
.card{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:12px}
.card-head{border-bottom:1px solid var(--line);padding-bottom:.5rem;margin-bottom:.6rem}
.row{display:flex;align-items:center}.wrap{flex-wrap:wrap}.gap{gap:.6rem}
.mono{font-family:var(--mono)}.mini{font-size:.86rem}.muted{color:var(--muted)}

.grid.stats{display:grid;grid-template-columns:repeat(4,1fr);gap:.5rem;margin-top:.6rem}
.stat{border:1px solid var(--line);background:#fff;border-radius:.6rem;padding:.5rem}
.stat div{color:var(--muted);font-size:.85rem}
.stat strong{font-variant-numeric:tabular-nums}

.progress{height:8px;background:#eef2ff;border-radius:999px;overflow:hidden;margin-top:.5rem}
.bar{height:100%;background:linear-gradient(90deg,var(--brand),var(--accent))}

.wb-typing{display:flex;gap:.6rem;align-items:center;margin-top:.4rem}
.tag{background:#eef2ff;color:#1f2937;border:1px solid #dbeafe;border-radius:8px;padding:.35rem .6rem}
.wb-input{flex:1; padding:.55rem .7rem;border:1px solid var(--line);border-radius:.6rem;font-family:var(--mono)}
.wb-gloss{margin-top:.45rem}

.kara-wrap{border:1px dashed var(--line);border-radius:.6rem;padding:.6rem;background:#fafafa}
.template{border:1px solid var(--line);border-radius:.6rem;padding:.5rem;background:#fff;min-height:54px;white-space:pre-wrap}
.kara-input{width:100%;margin-top:.5rem;border:1px solid var(--line);border-radius:.6rem;padding:.6rem;font-family:var(--mono)}

.tk{padding:0 .5px}
.bad{background:#fee2e2;color:#991b1b;text-decoration:underline;text-decoration-color:#dc2626;text-decoration-thickness:2px}
.good{background:transparent}
.space{white-space:pre}
.punct{opacity:.7}

.grid.two{display:grid;grid-template-columns:1fr;gap:.75rem}
@media (min-width:900px){ .grid.two{grid-template-columns:1fr 1fr} }
.box{border:1px solid var(--line);border-radius:10px;background:#fff;padding:.6rem}
.notes{margin:0;white-space:pre-wrap;line-height:1.55}

.footer{text-align:center;padding:16px;color:var(--muted);font-size:.85rem}
